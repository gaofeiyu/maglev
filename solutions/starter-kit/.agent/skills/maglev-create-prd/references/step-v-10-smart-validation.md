---
name: 'step-v-10-smart-validation'
description: 'SMART 需求验证 - 验证功能需求是否符合 SMART 质量标准'

# File references (ONLY variables used in this step)
nextStepFile: './step-v-11-holistic-quality-validation.md'
prdFile: '{prd_file_path}'
validationReportPath: '{validation_report_path}'
advancedElicitationTask: 'references/advanced-elicitation.workflow.xml'
---

# 步骤 10: SMART 需求验证

## 步骤目标：

验证功能需求是否符合 SMART 质量标准（具体的、可测量的、可实现的、相关的、可追溯的），确保高质量的需求。

## 强制执行规则 (请先阅读):

### 通用规则：

- 🛑 绝不 在没有用户输入的情况下生成内容
- 📖 关键：在采取任何行动之前，请阅读完整的步骤文件
- 🔄 关键：当使用 'C' 加载下一步时，确保已阅读整个文件
- 📋 你是一个协调员，而不是内容生成器
- ✅ 你必须始终使用配置的 `{communication_language}` 以你的 Agent 沟通风格输出语言

### 角色强化：

- ✅ 你是验证架构师和质量保证专家
- ✅ 如果你已经被赋予了沟通或人物模式，在扮演这个新角色时继续使用它们
- ✅ 我们参与系统验证，而不是协作对话
- ✅ 你带来需求工程专业知识和质量评估
- ✅ 此步骤自动运行 - 不需要用户输入

### 步骤特定规则：

- 🎯 仅关注 使用 SMART 框架进行 FR 质量评估
- 🚫 禁止 在此步骤中验证其他方面
- 💬 方法：在 SMART 标准上对每个 FR 进行评分（1-5 分）
- 🚪 这是一个验证序列步骤 - 完成后自动继续

## 执行协议：

- 🎯 从 PRD 中提取所有 FR
- 🎯 在 SMART 标准上对每个 FR 进行评分（具体的、可测量的、可实现的、相关的、可追溯的）
- 💾 标记任何类别得分 < 3 的 FR
- 📖 将评分表和建议追加到验证报告
- 📖 显示 "正在进行下一步检查..." 并加载下一步
- 🚫 禁止 暂停或请求用户输入

## 上下文边界：

- 可用上下文：PRD 文件，验证报告
- 重点：仅使用 SMART 框架进行 FR 质量评估
- 限制：不验证 NFR 或其他方面，不暂停等待用户输入
- 依赖项：步骤 2-9 已完成 - 全面的验证检查已完成

## 强制序列

**关键：** 严格遵循此序列。除非用户明确要求更改，否则不要跳过、重新排序或即兴发挥。

### 1. 提取所有功能需求

从 PRD 的功能需求部分提取：
- 所有带有 FR 编号的 FR (FR-001, FR-002 等)
- 统计总 FR 数

### 2. 尝试子流程验证

**尝试使用 Task 工具生成子流程：**

"对这些功能需求执行 SMART 需求验证：

{List all FRs}

**对于每个 FR，在 SMART 标准上进行评分（1-5 分）：**

**具体的 (1-5):**
- 5: 清晰，明确，定义良好
- 3: 有点清晰但可以更具体
- 1: 模糊，模棱两可，不清楚

**可测量的 (1-5):**
- 5: 可量化的指标，可测试
- 3: 部分可测量
- 1: 不可测量，主观

**可实现的 (1-5):**
- 5: 现实，在约束条件下可实现
- 3: 可能实现但不确定
- 1: 不现实，技术上不可行

**相关的 (1-5):**
- 5: 清楚地与用户需求和业务目标一致
- 3: 有点相关但连接不清楚
- 1: 不相关，不符合目标

**可追溯的 (1-5):**
- 5: 清楚地追溯到用户旅程或业务目标
- 3: 部分可追溯
- 1: 孤儿需求，没有明确来源

**对于任何类别得分 < 3 的每个 FR：**
- 提供具体的改进建议

返回带有所有 FR 分数和低分 FR 改进建议的评分表。"

### 3. 构建评分表

对于每个 FR:
- FR 编号
- 具体得分 (1-5)
- 可测量得分 (1-5)
- 可实现得分 (1-5)
- 相关得分 (1-5)
- 可追溯得分 (1-5)
- 平均得分
- 标记如果任何类别 < 3

**计算总体 FR 质量:**
- 所有得分 ≥ 3 的 FR 百分比
- 所有得分 ≥ 4 的 FR 百分比
- 所有 FR 和类别的平均得分

### 4. 向验证报告报告 SMART 发现

追加到验证报告：

```markdown
## SMART 需求验证

**功能需求总数:** {count}

### 评分摘要

**所有得分 ≥ 3:** {percentage}% ({count}/{total})
**所有得分 ≥ 4:** {percentage}% ({count}/{total})
**总体平均得分:** {average}/5.0

### 评分表

| FR # | 具体 | 可测量 | 可实现 | 相关 | 可追溯 | 平均 | 标记 |
|------|----------|------------|------------|----------|-----------|--------|------|
| FR-001 | {s1} | {m1} | {a1} | {r1} | {t1} | {avg1} | {X if any <3} |
| FR-002 | {s2} | {m2} | {a2} | {r2} | {t2} | {avg2} | {X if any <3} |
[继续所有 FR]

**图例:** 1=差, 3=可接受, 5=优秀
**标记:** X = 一个或多个类别的得分 < 3

### 改进建议

**低分 FR:**

**FR-{number}:** {specific suggestion for improvement}
[对于任何类别得分 < 3 的每个 FR]

### 总体评估

**严重性:** [严重 如果 >30% 标记 FR, 警告 如果 10-30%, 通过 如果 <10%]

**推荐:**
[如果严重] "许多 FR 存在质量问题。使用 SMART 框架修订标记的 FR 以提高清晰度和可测试性。"
[如果警告] "一些 FR 将受益于 SMART 细化。关注上面标记的需求。"
[如果通过] "功能需求总体上表现出良好的 SMART 质量。"
```

### 5. 显示进度并自动继续

显示："**SMART 需求验证完成**

FR 质量：{percentage}% 具有可接受的分数 ({severity})

**正在进行下一步验证检查...**"

毫不延迟，完整阅读并遵循：{nextStepFile} (step-v-11-holistic-quality-validation.md)

---

## 🚨 系统成功/失败指标

### ✅ 成功：

- 从 PRD 中提取所有 FR
- 在所有 5 个 SMART 标准上对每个 FR 进行评分（1-5 分）
- 标记得分 < 3 的 FR 以进行改进
- 为低分 FR 提供改进建议
- 构建带有所有 FR 分数的评分表
- 计算总体质量指标
- 将发现报告给验证报告
- 自动继续进行下一个验证步骤
- 尝试子流程架构并进行优雅降级

### ❌ 系统失败：

- 未在所有 SMART 标准上对所有 FR 进行评分
- 省略低分 FR 的改进建议
- 未构建评分表
- 未计算总体质量指标
- 未将发现报告给验证报告
- 未自动继续

**主规则：** FR 应该是高质量的，而不仅仅是存在。SMART 框架提供客观的质量衡量标准。
