---
name: 'step-11-polish'
description: '优化和润色完整的 PRD 文档，以提高流畅性、连贯性和可读性'

# File References
nextStepFile: './step-12-complete.md'
outputFile: '{planning_artifacts}/prd.md'
purposeFile: './data/prd-purpose.md'

# Task References
advancedElicitationTask: 'references/advanced-elicitation.workflow.xml'
partyModeWorkflow: 'references/party-mode.workflow.md'
---

# 步骤 11: 文档润色

**进度：第 11 步，共 12 步** - 下一步：完成 PRD

## 强制执行规则 (请先阅读):

- 🛑 关键：在进行更改之前加载**整个**文档
- 📖 关键：在采取行动之前阅读完整的步骤文件
- 🔄 关键：当使用 'C' 加载下一步时，确保已阅读整个文件
- ✅ 这是一个**润色**步骤 - 优化现有内容
- 📋 改善 流畅性、连贯性和可读性
- 💬 保留 用户的声音和意图
- 🎯 在改善呈现的同时保留所有基本信息
- ✅ 你必须始终使用配置的 `{communication_language}` 以你的 Agent 沟通风格输出语言

## 执行协议：

- 🎯 首先加载完整文档
- 📝 审查流畅性和连贯性问题
- ✂️ 减少重复，同时保留基本信息
- 📖 确保整个文档使用适当的 ## 2 级标题
- 💾 保存优化的文档
- ⚠️ 在润色后展示 A/P/C 菜单
- 🚫 **不要**跳过审查步骤

## 上下文边界：

- 来自所有先前步骤的完整 PRD 文档已存在
- 文档可能由于逐步追加而有重复
- 各部分可能无法顺畅连接
- 2 级标题确保如果需要可以拆分文档
- 专注于可读性和连贯性

## 你的任务：

优化完整的 PRD 文档，以提高流畅性、连贯性和专业呈现，同时保留所有基本信息。

## 文档润色序列：

### 1. 加载上下文和文档

**关键：** 首先加载 PRD 目的文档：

- 阅读 `{purposeFile}` 以了解什么造就了伟大的 BMAD PRD
- 内化哲学：信息密度、可追溯性、可测量的要求
- 牢记双重受众性质（人类 + LLM）

**然后加载 PRD 文档：**

- 从头到尾完整阅读 `{outputFile}`
- 了解完整的文档结构和内容
- 识别所有部分及其关系
- 注意需要关注的领域

### 2. 文档质量审查

带着 PRD 目的原则审查整个文档：

**信息密度：**
- 是否有可以压缩的冗长短语？
- 是否存在对话式填充？
- 句子可以更直接简练吗？

**流畅性和连贯性：**
- 各部分过渡是否顺畅？
- 是否有突兀的主题转换？
- 文档是否讲述了一个连贯的故事？
- 对于读者来说，进展是否合乎逻辑？

**重复检测：**
- 观点是否在各部分重复？
- 相同的信息是否多次陈述？
- 冗余内容可以合并吗？
- 是否有矛盾的陈述？

**标题结构：**
- 所有主要部分是否使用 ## 2 级标题？
- 层级是否一致 (##, ###, ####)？
- 部分是否易于提取或引用？
- 标题是否具有描述性和清晰性？

**可读性：**
- 句子是否清晰简洁？
- 语言是否通篇一致？
- 技术术语是否使用得当？
- 利益相关者是否容易理解？

### 3. 优化行动

进行有针对性的改进：

**改善流畅性：**
- 在各部分之间添加过渡句
- 平滑突兀的主题转换
- 确保逻辑进展
- 连接各部分的相关概念

**减少重复：**
- 合并重复信息
- 将内容保留在最合适的部分
- 使用交叉引用而不是重复
- 删除多余的解释

**增强连贯性：**
- 确保通篇术语一致
- 将所有部分与产品差异化因素对齐
- 保持一致的声音和语气
- 验证各部分的范围一致性

**优化标题：**
- 确保所有主要部分使用 ## 2 级
- 使标题具有描述性和行动导向
- 检查标题是否遵循一致的模式
- 验证标题支持文档导航

### 4. 保留关键信息

**在优化的同时，确保不丢失任何重要信息：**

**必须保留：**
- 所有用户成功标准
- 所有功能需求（能力合同）
- 所有用户旅程叙事
- 所有范围决策（MVP、增长、愿景）
- 所有非功能需求
- 产品差异化因素和愿景
- 领域特定需求
- 创新分析（如果存在）

**可以合并：**
- 同一概念的重复解释
- 冗余的背景信息
- 类似内容的多个版本
- 重叠的示例

### 5. 生成优化文档

创建润色后的版本：

**润色过程：**
1. 从原始文档开始
2. 应用所有优化行动
3. 审查以确及没有丢失任何重要内容
4. 验证改进增强了可读性
5. 准备优化版本以供审查

### 6. 展示菜单选项

展示润色后的文档以供审查，然后显示菜单：
- 显示润色中更改的内容
- 强调所做的改进（流畅性、重复、标题）
- 询问他们是否愿意进一步完善、获得其他观点或继续
- 作为对话的一部分自然地展示菜单选项

显示： "**选择：** [A] 高级诱导 [P] 派对模式 [C] 继续到完成 PRD (第 12 步，共 12 步)"

#### 菜单处理逻辑：
- 如果 A: 完整阅读并遵循：{advancedElicitationTask} 使用润色后的文档，处理返回的增强改进，询问用户“接受这些润色改进吗？(y/n)”，如果接受用改进更新内容然后重新显示菜单，如果否保持原始润色然后重新显示菜单
- 如果 P: 完整阅读并遵循：{partyModeWorkflow} 使用润色后的文档，处理对流畅性和连贯性的协作改进，询问用户“接受这些润色更改吗？(y/n)”，如果接受用改进更新内容然后重新显示菜单，如果否保持原始润色然后重新显示菜单
- 如果 C: 将润色后的文档保存到 {outputFile}，通过将此步骤名称添加到 stepsCompleted 数组的末尾来更新 frontmatter，然后完整阅读并遵循：{nextStepFile}
- 如果 其他：帮助用户响应，然后重新显示菜单

#### 执行规则：
- 始终 在展示菜单后停止并等待用户输入
- 仅 当用户选择 'C' 时才进行下一步
- 在其他菜单项执行后，返回此菜单

## 追加到文档：

当用户选择 'C' 时，用润色后的版本替换**整个**文档内容。

## 成功指标：

✅ 加载并审查完整文档
✅ 改善流畅性和连贯性
✅ 减少重复的同时保留基本信息
✅ 所有主要部分使用 ## 2 级标题
✅ 各部分之间的过渡顺畅
✅ 保留用户的声音和意图
✅ 文档更具可读性和专业性
✅ 正确展示和处理 A/P/C 菜单
✅ 选择 C 时保存润色后的文档

## 失败模式：

❌ 仅加载部分文档（导致不完全润色）
❌ 删除基本信息同时减少重复
❌ 未保留用户的声音和意图
❌ 更改内容而不是改善呈现
❌ 未确保主要部分使用 ## 2 级标题
❌ 进行随意的风格更改而不是连贯性改进
❌ 未展示 A/P/C 菜单供用户批准
❌ 在没有用户选择 'C' 的情况下保存润色后的文档

❌ **关键**: 仅阅读部分步骤文件 - 导致不完全理解和糟糕的决定
❌ **关键**: 在未完全阅读和理解下一个步骤文件的情况下继续使用 'C'
❌ **关键**: 在未完全了解文档要求的情况下进行更改

## 下一步：

当用户选择 'C' 且润色后的文档保存后，加载 `./step-12-complete.md` 以完成工作流。

记住：在用户从 A/P/C 菜单中明确选择 'C' 且润色后的文档保存之前，请勿进行 step-12！
